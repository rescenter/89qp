!function(){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});for(var h=["webkit","moz"],i=0;i<h.length&&!window.requestAnimationFrame;++i){var c=h[i];window.requestAnimationFrame=window[c+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var g=0;window.requestAnimationFrame=function(h){var c=Date.now(),_=Math.max(g+16,c);return setTimeout(function(){h(g=_)},_-c)},window.cancelAnimationFrame=clearTimeout}}(),function(){function h(h,c,g){h.addEventListener(c,g,!1)}function c(x){return Math.sqrt(1-Math.pow(x-1,2))}function g(h){return 1-Math.sqrt(1-h*h)}function _(h,c){for(var i in c)if(c[i].test(h[i]))return!0;return!1}var M=function(c){this.element="string"==typeof c.touch?document.querySelector(c.touch):c.touch,this.target=this._getValue(c.target,this.element),this.vertical=this._getValue(c.vertical,!0),this.property=c.property,this.tickID=0,this.initialValue=this._getValue(c.initialValue,this.target[this.property]),this.target[this.property]=this.initialValue,this.fixed=this._getValue(c.fixed,!1),this.sensitivity=this._getValue(c.sensitivity,1),this.moveFactor=this._getValue(c.moveFactor,1),this.factor=this._getValue(c.factor,1),this.outFactor=this._getValue(c.outFactor,.3),this.min=c.min,this.max=c.max,this.deceleration=6e-4,this.maxRegion=this._getValue(c.maxRegion,600),this.springMaxRegion=this._getValue(c.springMaxRegion,60),this.maxSpeed=c.maxSpeed,this.hasMaxSpeed=!(void 0===this.maxSpeed),this.lockDirection=this._getValue(c.lockDirection,!0);var g=function(){};if(this.change=c.change||g,this.touchEnd=c.touchEnd||g,this.touchStart=c.touchStart||g,this.touchMove=c.touchMove||g,this.touchCancel=c.touchCancel||g,this.reboundEnd=c.reboundEnd||g,this.animationEnd=c.animationEnd||g,this.correctionEnd=c.correctionEnd||g,this.tap=c.tap||g,this.pressMove=c.pressMove||g,this.preventDefault=this._getValue(c.preventDefault,!0),this.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},this.hasMin=!(void 0===this.min),this.hasMax=!(void 0===this.max),this.hasMin&&this.hasMax&&this.min>this.max)throw"the min value can't be greater than the max value.";this.isTouchStart=!1,this.step=c.step,this.inertia=this._getValue(c.inertia,!0),this._calculateIndex(),this.eventTarget=window,c.bindSelf&&(this.eventTarget=this.element),this._moveHandler=this._move.bind(this),h(this.element,"touchstart",this._start.bind(this)),h(this.eventTarget,"touchend",this._end.bind(this)),h(this.eventTarget,"touchcancel",this._cancel.bind(this)),this.eventTarget.addEventListener("touchmove",this._moveHandler,{passive:!1,capture:!1}),this.x1=this.x2=this.y1=this.y2=null};M.prototype={_getValue:function(h,c){return void 0===h?c:h},stop:function(){cancelAnimationFrame(this.tickID),this._calculateIndex()},_start:function(h){this.isTouchStart=!0,this.touchStart.call(this,h,this.target[this.property]),cancelAnimationFrame(this.tickID),this._calculateIndex(),this.startTime=(new Date).getTime(),this.x1=this.preX=h.touches[0].pageX,this.y1=this.preY=h.touches[0].pageY,this.start=this.vertical?this.preY:this.preX,this._firstTouchMove=!0,this._preventMove=!1},_move:function(h){if(this.isTouchStart){var c=h.touches.length,g=h.touches[0].pageX,M=h.touches[0].pageY;if(this._firstTouchMove&&this.lockDirection){var w=Math.abs(g-this.x1)-Math.abs(M-this.y1);w>0&&this.vertical?this._preventMove=!0:0>w&&!this.vertical&&(this._preventMove=!0),this._firstTouchMove=!1}if(!this._preventMove){var d=(this.vertical?M-this.preY:g-this.preX)*this.sensitivity,f=this.moveFactor;this.hasMax&&this.target[this.property]>this.max&&d>0?f=this.outFactor:this.hasMin&&this.target[this.property]<this.min&&0>d&&(f=this.outFactor),d*=f,this.preX=g,this.preY=M,this.fixed||(this.target[this.property]+=d),this.change.call(this,this.target[this.property]);var y=(new Date).getTime();y-this.startTime>300&&(this.startTime=y,this.start=this.vertical?this.preY:this.preX),this.touchMove.call(this,h,this.target[this.property])}this.preventDefault&&!_(h.target,this.preventDefaultException)&&h.preventDefault(),1===c&&(null!==this.x2?(h.deltaX=g-this.x2,h.deltaY=M-this.y2):(h.deltaX=0,h.deltaY=0),this.pressMove.call(this,h,this.target[this.property])),this.x2=g,this.y2=M}},_cancel:function(h){var c=this.target[this.property];this.touchCancel.call(this,h,c),this._end(h)},to:function(v,h,g){this._to(v,this._getValue(h,600),g||c,this.change,function(h){this._calculateIndex(),this.reboundEnd.call(this,h),this.animationEnd.call(this,h)}.bind(this))},_calculateIndex:function(){this.hasMax&&this.hasMin&&(this.currentPage=Math.round((this.max-this.target[this.property])/this.step))},_end:function(h){if(this.isTouchStart){this.isTouchStart=!1;var _=this,M=this.target[this.property],w=Math.abs(h.changedTouches[0].pageX-this.x1)<30&&Math.abs(h.changedTouches[0].pageY-this.y1)<30;if(w&&this.tap.call(this,h,M),this.touchEnd.call(this,h,M,this.currentPage)===!1)return;if(this.hasMax&&M>this.max)this._to(this.max,200,c,this.change,function(h){this.reboundEnd.call(this,h),this.animationEnd.call(this,h)}.bind(this));else if(this.hasMin&&M<this.min)this._to(this.min,200,c,this.change,function(h){this.reboundEnd.call(this,h),this.animationEnd.call(this,h)}.bind(this));else if(!this.inertia||w||this._preventMove)_._correction();else{var y=(new Date).getTime()-this.startTime;if(300>y){var T=((this.vertical?h.changedTouches[0].pageY:h.changedTouches[0].pageX)-this.start)*this.sensitivity,E=Math.abs(T)/y,b=this.factor*E;this.hasMaxSpeed&&b>this.maxSpeed&&(b=this.maxSpeed);var D=M+b*b/(2*this.deceleration)*(0>T?-1:1),F=1;D<this.min?D<this.min-this.maxRegion?(F=g((M-this.min+this.springMaxRegion)/(M-D)),D=this.min-this.springMaxRegion):(F=g((M-this.min+this.springMaxRegion*(this.min-D)/this.maxRegion)/(M-D)),D=this.min-this.springMaxRegion*(this.min-D)/this.maxRegion):D>this.max&&(D>this.max+this.maxRegion?(F=g((this.max+this.springMaxRegion-M)/(D-M)),D=this.max+this.springMaxRegion):(F=g((this.max+this.springMaxRegion*(D-this.max)/this.maxRegion-M)/(D-M)),D=this.max+this.springMaxRegion*(D-this.max)/this.maxRegion));var R=Math.round(E/_.deceleration)*F;_._to(Math.round(D),R,c,_.change,function(h){_.hasMax&&_.target[_.property]>_.max?(cancelAnimationFrame(_.tickID),_._to(_.max,600,c,_.change,_.animationEnd)):_.hasMin&&_.target[_.property]<_.min?(cancelAnimationFrame(_.tickID),_._to(_.min,600,c,_.change,_.animationEnd)):_.step?_._correction():_.animationEnd.call(_,h),_.change.call(this,h)})}else _._correction()}}this.x1=this.x2=this.y1=this.y2=null},_to:function(h,c,g,_,M){if(!this.fixed){var w=this.target,y=this.property,T=w[y],E=h-T,b=new Date,D=this,F=function(){var R=new Date-b;return R>=c?(w[y]=h,_&&_.call(D,h),void(M&&M.call(D,h))):(w[y]=E*g(R/c)+T,D.tickID=requestAnimationFrame(F),void(_&&_.call(D,w[y])))};F()}},_correction:function(){if(void 0!==this.step){var h=this.target,g=this.property,_=h[g],M=Math.floor(Math.abs(_/this.step)),w=_%this.step;Math.abs(w)>this.step/2?this._to((0>_?-1:1)*(M+1)*this.step,400,c,this.change,function(h){this._calculateIndex(),this.correctionEnd.call(this,h),this.animationEnd.call(this,h)}.bind(this)):this._to((0>_?-1:1)*M*this.step,400,c,this.change,function(h){this._calculateIndex(),this.correctionEnd.call(this,h),this.animationEnd.call(this,h)}.bind(this))}}},"undefined"!=typeof module&&"object"==typeof exports?module.exports=M:window.AlloyTouch=M}();